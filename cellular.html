<html>
 <head>
  <script type="application/javascript">
    function draw() {
      var canvas = document.getElementById("canvas");
      if (canvas.getContext) {
        var ctx = canvas.getContext("2d");
        ctx.fillStyle = 'rgb(255, 255, 255)';
        ctx.fillRect(1,1,canvas.width,canvas.height);
        ctx.fillStyle = 'rgb(0, 0, 0)';
        ctx.fillRect(canvas.width/2,1,1,1);
        
        var r1=document.forms.rules.rule1.checked;
        var r2=document.forms.rules.rule2.checked;
        var r3=document.forms.rules.rule3.checked;
        var r4=document.forms.rules.rule4.checked;
        var r5=document.forms.rules.rule5.checked;
        var r6=document.forms.rules.rule6.checked;
        var r7=document.forms.rules.rule7.checked;
        var r8=document.forms.rules.rule8.checked;
        
        for(var y=1; y<canvas.height-1; y++) {
          var myImageData = ctx.getImageData(0, y, canvas.width, 1);
          var myImageData2 = ctx.getImageData(0, y, canvas.width, 1);
          
          for(var x=1; x<canvas.width-1; x++) {
/*
            var a = myImageData.data[(x-1)*4] == 0;
            var b = myImageData.data[x*4]     == 0;
            var c = myImageData.data[(x+1)*4] == 0;
*/
var a = myImageData.data[(x-1)*4] != 255;
a = a | myImageData.data[((x-1)*4)+1] != 255;
a = a | myImageData.data[((x-1)*4)+2] != 255;
var b = myImageData.data[x*4]     != 255;
b = b | myImageData.data[(x*4)+1] != 255;
b = b | myImageData.data[(x*4)+2] != 255;
var c = myImageData.data[(x+1)*4] != 255;
c = c | myImageData.data[((x+1)*4)+1] != 255;
c = c | myImageData.data[((x+1)*4)+2] != 255;
            
            if(x<2) a=0;
            
            //var d = ((a&&!b&&!c) || (!a&&b&&c) || (!a&&b&&!c) || (!a&&!b&&c)) ? 0 : 255;
            var d='white';
            if(a && b && c && r1)
              d='fuchsia';
            if(a && b && !c && r2)
              d='red';
            if(a && !b && c && r3)
              d='orange';
            if(a && !b && !c && r4)
              d='yellow';
            if(!a && b && c && r5)
              d='green';
            if(!a && b && !c && r6)
              d='dodgerblue';
            if(!a && !b && c && r7)
              d='navy';
            if(!a && !b && !c && r8)
              d='purple';
/*
            var d=255;
            if(a && b && c && r1)
              d=0;
            if(a && b && !c && r2)
              d=0;
            if(a && !b && c && r3)
              d=0;
            if(a && !b && !c && r4)
              d=0;
            if(!a && b && c && r5)
              d=0;
            if(!a && b && !c && r6)
              d=0;
            if(!a && !b && c && r7)
              d=0;
            if(!a && !b && !c && r8)
              d=0;
            var index = x*4;
            myImageData2.data[index]   = d;
            myImageData2.data[index+1] = d;
            myImageData2.data[index+2] = d;
*/
            var index = x*4;
            myImageData2.data[index]   = (d=='white')?255:0;
            myImageData2.data[index+1] = (d=='white')?255:0;
            myImageData2.data[index+2] = (d=='white')?255:0;

ctx.fillStyle = d;
ctx.fillRect(x,y+1,1,1);
          }
//          ctx.putImageData(myImageData2, 0, y+1);
        }
    
      }
    }
  </script>
 </head>
 <body onload="draw();">
   <form name="rules" onsubmit="draw();return false;">
     <table style="display: inline; border-collapse:collapse;">
       <tr>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
       </tr>
       <tr><td colspan="3"><input type="checkbox" style="width:30px;" name="rule1"/></td></tr>
     </table>
     <table style="display: inline; border-collapse:collapse;">
       <tr border=1>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
       </tr>
       <tr><td colspan="3"><input type="checkbox" style="width:30px;" name="rule2"/></td></tr>
     </table>
     <table style="display: inline; border-collapse:collapse;">
       <tr>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
       </tr>
       <tr><td colspan="3"><input type="checkbox" style="width:30px;" name="rule3"/></td></tr>
     </table>
     <table style="display: inline; border-collapse:collapse;">
       <tr>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
       </tr>
       <tr><td colspan="3"><input type="checkbox" style="width:30px;" name="rule4" checked="checked"/></td></tr>
     </table>
     <table style="display: inline; border-collapse:collapse;">
       <tr>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
       </tr>
       <tr><td colspan="3"><input type="checkbox" style="width:30px;" name="rule5" checked="checked"/></td></tr>
     </table>
     <table style="display: inline; border-collapse:collapse;">
       <tr>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
       </tr>
       <tr><td colspan="3"><input type="checkbox" style="width:30px;" name="rule6" checked="checked"/></td></tr>
     </table>
     <table style="display: inline; border-collapse:collapse;">
       <tr>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:black; border: 1px solid black;"></td>
       </tr>
       <tr><td colspan="3"><input type="checkbox" style="width:30px;" name="rule7" checked="checked"/></td></tr>
     </table>
     <table style="display: inline; border-collapse:collapse;">
       <tr>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
         <td style="width:10px; height:10px; background:white; border: 1px solid black;"></td>
       </tr>
       <tr><td colspan="3"><input type="checkbox" style="width:30px;" name="rule8"/></td></tr>
     </table>
     <input type="submit" value="Redraw"/>
   </form>
   <canvas id="canvas" width="1000" height="500"></canvas>
 </body>
</html>